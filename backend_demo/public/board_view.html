<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê²Œì‹œê¸€ ë³´ê¸°</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#232427] text-[#e5e7eb]">

  <main class="max-w-3xl mx-auto mt-10 p-6 bg-[#2b2c30] rounded-xl shadow space-y-6">
    <h1 id="postTitle" class="text-2xl font-bold"></h1>
    <p id="postDate" class="text-sm text-gray-400"></p>
    <hr class="border-[#3a3b3e]" />
    <p id="postContent" class="text-base leading-relaxed whitespace-pre-wrap"></p>

    <div class="text-right">
      <a href="index.html" class="text-[#10a37f] hover:underline text-sm">â† ëŒì•„ê°€ê¸°</a>
      <a id="editBtn" class="text-sm text-blue-400 hover:underline cursor-pointer">âœï¸ ìˆ˜ì •</a>
      <button id="deleteBtn" class="text-sm text-red-400 hover:underline">ğŸ—‘ ì‚­ì œ</button>
    </div>
  </main>

  <script>
    // URLì—ì„œ index=ê°’ ì½ê¸°
    const params = new URLSearchParams(window.location.search);
    const index = parseInt(params.get("index"));

    const posts = JSON.parse(localStorage.getItem("posts") || "[]");

    if (isNaN(index) || index < 0 || index >= posts.length) {
      document.body.innerHTML = "<p class='text-center mt-10 text-red-400'>ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²Œì‹œê¸€ì…ë‹ˆë‹¤.</p>";
    } else {
      const post = posts[index]; // ìµœì‹ ê¸€ì´ ìœ„ë¡œ ìŒ“ì˜€ìœ¼ë¯€ë¡œ ì—­ìˆœ

      document.getElementById("postTitle").textContent = post.title;
      document.getElementById("postDate").textContent = `ì‘ì„±ì¼: ${post.date}`;
      document.getElementById("postContent").textContent = post.content;
      document.getElementById("editBtn").href = `board_edit.html?index=${index}`;
    }

    // ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì‹œ
    document.getElementById("deleteBtn").addEventListener("click", () => {
        if (!confirm("ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
    
        const posts = JSON.parse(localStorage.getItem("posts") || "[]");
    
        posts.splice(index, 1); // í•´ë‹¹ indexì˜ ê²Œì‹œê¸€ ì‚­ì œ
    
        localStorage.setItem("posts", JSON.stringify(posts));
        alert("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
        window.location.href = "index.html";
    });
  </script>

</body>
</html>
